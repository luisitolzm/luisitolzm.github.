<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generador ID Pro + ACL</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: Arial, sans-serif;
}

body{
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background: linear-gradient(-45deg,#ff0080,#7928ca,#2afadf,#00ff88);
    background-size:400% 400%;
    animation:bg 12s ease infinite;
}

@keyframes bg{
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}

.box{
    background:#fff;
    width:400px;
    padding:30px;
    border-radius:18px;
    box-shadow:0 20px 40px rgba(0,0,0,.35);
    text-align:center;
}

h1,h2{
    color:#7928ca;
    margin-bottom:15px;
}

hr{
    margin:18px 0;
    border:none;
    height:2px;
    background:linear-gradient(to right,#7928ca,#ff0080);
    border-radius:5px;
}

input{
    width:100%;
    padding:13px;
    margin:8px 0;
    border-radius:10px;
    border:1px solid #ccc;
    font-size:15px;
}

button{
    width:100%;
    padding:13px;
    margin-top:10px;
    border:none;
    border-radius:10px;
    background:#7928ca;
    color:#fff;
    font-weight:bold;
    cursor:pointer;
    transition:.3s;
}

button:hover{
    background:#ff0080;
    transform:scale(1.05);
}

.link{
    margin-top:15px;
    color:#0077cc;
    cursor:pointer;
    font-size:14px;
}

.link:hover{text-decoration:underline}

.error{
    color:red;
    margin-top:10px;
    display:none;
}

.hidden{display:none}

.userBox{
    background:#f4f4f4;
    padding:15px;
    border-radius:12px;
    margin-bottom:15px;
    line-height:1.6;
}

.badge{
    display:inline-block;
    padding:4px 10px;
    border-radius:20px;
    font-size:12px;
    font-weight:bold;
}

.admin{background:#2afadf;color:#000}
.normal{background:#ddd;color:#000}

#generatedID{
    font-size:24px;
    margin:15px 0;
    font-weight:bold;
    letter-spacing:3px;
    color:#ff0080;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="box" id="loginBox">
    <h2>üîê Iniciar Sesi√≥n</h2>
    <hr>
    <input id="loginUser" placeholder="Usuario">
    <input id="loginPass" type="password" placeholder="Contrase√±a">
    <button onclick="login()">Entrar</button>
    <p class="error" id="loginError">Datos incorrectos</p>
    <div class="link" onclick="showRegister()">¬øNo tienes cuenta? Reg√≠strate</div>
</div>

<!-- REGISTRO -->
<div class="box hidden" id="registerBox">
    <h2>üìù Registro</h2>
    <hr>
    <input id="regUser" placeholder="Nuevo usuario">
    <input id="regPass" type="password" placeholder="Nueva contrase√±a">
    <button onclick="register()">Crear cuenta</button>
    <p class="error" id="regError">Completa todos los campos</p>
    <div class="link" onclick="showLogin()">Ya tengo cuenta</div>
</div>

<!-- PANEL -->
<div class="box hidden" id="generatorBox">
    <h1>‚öôÔ∏è Panel Principal</h1>
    <hr>

    <div class="userBox">
        üë§ Usuario: <b id="userName">---</b><br>
        üîê ACL: <b id="aclStatus">SIN ACL</b><br>
        ‚≠ê Rol: <span id="roleBadge" class="badge normal">USUARIO</span>
    </div>

    <button onclick="generateID()">üé≤ Generar ID</button>
    <div id="generatedID">---</div>
    <button onclick="copyID()">üìã Copiar ID</button>

    <div id="aclPanel" class="hidden">
        <hr>
        <h2>üîë Panel ACL</h2>
        <input id="aclName" placeholder="Nombre del ACL">
        <button onclick="giveACL()">DAR ACL</button>
    </div>

    <div id="noPerm" class="hidden" style="color:#888;margin-top:15px;">
        ‚ùå No tienes permiso para dar ACL
    </div>

    <hr>
    <button onclick="logout()">üö™ Cerrar sesi√≥n</button>
</div>

<script>
// AUTO LOGIN
if(localStorage.getItem("session")==="true"){
    showGenerator()
}

// VISTAS
function showRegister(){
    loginBox.classList.add("hidden")
    registerBox.classList.remove("hidden")
}

function showLogin(){
    registerBox.classList.add("hidden")
    loginBox.classList.remove("hidden")
}

function showGenerator(){
    loginBox.classList.add("hidden")
    registerBox.classList.add("hidden")
    generatorBox.classList.remove("hidden")

    const user = localStorage.getItem("user")
    userName.textContent = user

    const acl = localStorage.getItem("acl_"+user)
    aclStatus.textContent = acl ? acl : "SIN ACL"

    // PERMISOS
    if(user === "Luis"){
        aclPanel.classList.remove("hidden")
        roleBadge.textContent = "ADMIN"
        roleBadge.className = "badge admin"
    }else{
        noPerm.classList.remove("hidden")
    }
}

// REGISTRO
function register(){
    if(!regUser.value || !regPass.value){
        regError.style.display="block"
        return
    }
    localStorage.setItem("user",regUser.value)
    localStorage.setItem("pass",regPass.value)
    alert("Cuenta creada correctamente ‚úÖ")
    showLogin()
}

// LOGIN
function login(){
    if(
        loginUser.value === localStorage.getItem("user") &&
        loginPass.value === localStorage.getItem("pass")
    ){
        localStorage.setItem("session","true")
        showGenerator()
    }else{
        loginError.style.display="block"
    }
}

// LOGOUT
function logout(){
    localStorage.removeItem("session")
    location.reload()
}

// ID
function generateID(){
    const c="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"
    let id=""
    for(let i=0;i<8;i++) id+=c[Math.floor(Math.random()*c.length)]
    generatedID.textContent=id
}

function copyID(){
    if(generatedID.textContent==="---") return alert("Genera un ID primero")
    navigator.clipboard.writeText(generatedID.textContent)
    alert("ID copiado ‚úî")
}

// DAR ACL
function giveACL(){
    const acl = aclName.value.trim()
    const user = localStorage.getItem("user")
    if(!acl) return alert("Escribe el nombre del ACL")
    localStorage.setItem("acl_"+user,acl)
    aclStatus.textContent = acl
    alert("ACL asignado üîê")
}
</script>

</body>
</html>
